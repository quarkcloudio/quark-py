import{U as h,d as L,aV as k,x as R,ai as x,ae as K,aR as N,e3 as z,bw as w,aT as D,b as F,o as T,f as G,h as H}from"./index-Dj2HrPVJ.js";var q=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],W=function(n){return q.map(function(t){return t.toLowerCase()}).indexOf(n.toLowerCase())!==-1},J=function(n,t,e){Object.keys(t).filter(W).forEach(function(i){var r=t[i];typeof r=="function"&&(i==="onInit"?r(n,e):e.on(i.substring(2),function(d){return r(d,e)}))})},Q=function(n,t,e,i){var r=n.modelEvents?n.modelEvents:null,d=Array.isArray(r)?r.join(" "):r;h(i,function(l,f){e&&typeof l=="string"&&l!==f&&l!==e.getContent({format:n.outputFormat})&&e.setContent(l)}),e.on(d||"change input undo redo",function(){t.emit("update:modelValue",e.getContent({format:n.outputFormat}))})},X=function(n,t,e,i,r,d){i.setContent(d()),e.attrs["onUpdate:modelValue"]&&Q(t,e,i,r),J(n,e.attrs,i)},O=0,V=function(n){var t=Date.now(),e=Math.floor(Math.random()*1e9);return O++,n+"_"+e+O+String(t)},Y=function(n){return n!==null&&n.tagName.toLowerCase()==="textarea"},B=function(n){return typeof n>"u"||n===""?[]:Array.isArray(n)?n:n.split(" ")},Z=function(n,t){return B(n).concat(B(t))},$=function(n){return n==null},M=function(n){var t;return typeof((t=n.options)===null||t===void 0?void 0:t.set)=="function"&&n.options.isRegistered("disabled")},P=function(){return{listeners:[],scriptId:V("tiny-script"),scriptLoaded:!1}},nn=function(){var n=P(),t=function(r,d,l,f){var u=d.createElement("script");u.referrerPolicy="origin",u.type="application/javascript",u.id=r,u.src=l;var o=function(){u.removeEventListener("load",o),f()};u.addEventListener("load",o),d.head&&d.head.appendChild(u)},e=function(r,d,l){n.scriptLoaded?l():(n.listeners.push(l),r.getElementById(n.scriptId)||t(n.scriptId,r,d,function(){n.listeners.forEach(function(f){return f()}),n.scriptLoaded=!0}))},i=function(){n=P()};return{load:e,reinitialize:i}},en=nn(),tn=function(){return typeof window<"u"?window:global},v=function(){var n=tn();return n&&n.tinymce?n.tinymce:null},on={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,readonly:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return n==="html"||n==="text"}}},s=function(){return s=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},s.apply(this,arguments)},rn=function(n,t,e,i){return n(i||"div",{id:t,ref:e})},an=function(n,t,e){return n("textarea",{id:t,visibility:"hidden",ref:e})},S={selector:void 0,target:void 0},_=function(n,t){var e;typeof((e=n.mode)===null||e===void 0?void 0:e.set)=="function"?n.mode.set(t):n.setMode(t)},un=L({props:on,setup:function(n,t){var e=n.init?s(s({},n.init),S):s({},S),i=k(n),r=i.disabled,d=i.readonly,l=i.modelValue,f=i.tagName,u=R(null),o=null,E=n.id||V("tiny-vue"),b=n.init&&n.init.inline||n.inline,C=!!t.attrs["onUpdate:modelValue"],p=!0,A=n.initialValue?n.initialValue:"",y="",I=function(a){return C?function(){return l!=null&&l.value?l.value:""}:function(){return a?A:y}},g=function(){var a=I(p),c=s(s({},e),{disabled:n.disabled,readonly:n.readonly,target:u.value,plugins:Z(e.plugins,n.plugins),toolbar:n.toolbar||e.toolbar,inline:b,license_key:n.licenseKey,setup:function(m){o=m,!M(o)&&n.disabled===!0&&_(o,"readonly"),m.on("init",function(U){return X(U,n,t,m,l,a)}),typeof e.setup=="function"&&e.setup(m)}});Y(u.value)&&(u.value.style.visibility=""),v().init(c),p=!1};h(d,function(a){o!==null&&_(o,a?"readonly":"design")}),h(r,function(a){o!==null&&(M(o)?o.options.set("disabled",a):_(o,a?"readonly":"design"))}),h(f,function(a){var c;o&&(C||(y=o.getContent()),(c=v())===null||c===void 0||c.remove(o),D(function(){return g()}))}),x(function(){if(v()!==null)g();else if(u.value&&u.value.ownerDocument){var a=n.cloudChannel?n.cloudChannel:"8",c=n.apiKey?n.apiKey:"no-api-key",m=$(n.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(c,"/tinymce/").concat(a,"/tinymce.min.js"):n.tinymceScriptSrc;en.load(u.value.ownerDocument,m,g)}}),K(function(){v()!==null&&v().remove(o)}),b||(N(function(){p||g()}),z(function(){var a;o&&(C||(y=o.getContent()),(a=v())===null||a===void 0||a.remove(o))}));var j=function(a){var c;o&&(y=o.getContent(),(c=v())===null||c===void 0||c.remove(o),e=s(s(s({},e),a),S),D(function(){return g()}))};return t.expose({rerender:j,getEditor:function(){return o}}),function(){return b?rn(w,E,u,n.tagName):an(w,E,u)}}});const ln={id:"editor"},cn=Object.assign({name:"ProFormEditor"},{__name:"pro-form-editor",setup(n){return(t,e)=>(T(),F("main",ln,[G(H(un),{id:"uuid","license-key":"gpl",init:{language:"zh_CN",promotion:!1,branding:!1,plugins:["advlist","autolink","lists","link","image","charmap","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","preview","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",height:500}})]))}});export{cn as _};
